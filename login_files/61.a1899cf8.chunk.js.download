(this["webpackJsonponline-banking-app"]=this["webpackJsonponline-banking-app"]||[]).push([[61],{1302:function(e,t,n){"use strict";n.d(t,"a",(function(){return G}));var r=n(21),o=n(41),a=n(2),i=n(3),c=n(5),s=n(4),l=n(0),u=n.n(l),d=n(1777),f=n(1),p=n.n(f),g=n(874),m=n.n(g),v=n(1782),b=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hasError:!1},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state.hasError,t=this.props.children;if(e){var n=(this.props.messages||{}).widget,r=void 0===n?{}:n,o={};if(r){var a=r.loadErrorTitle,i=r.loadErrorMessage;o.title=a||"Error",o.msg=i||"There was an error loading the widget"}return u.a.createElement(v.a,o)}return t}}],[{key:"getDerivedStateFromError",value:function(e){return console.log("Error rendering widget",e),{hasError:!0}}}]),n}(l.Component);b.propTypes={messages:p.a.object.isRequired};var w=n(38),h=n.n(w),O=n(53),y=n(55),E=n.n(y),j=n(15),x=n.n(j),_=void 0,L=function(e,t){var n=e.substring(4),r={};return new Function("wrapper","React","ReactDOM","PropTypes","__widget_webpack_public_path__","return wrapper.".concat(n,";\n"))(r,u.a,x.a,p.a,t),r[Object.getOwnPropertyNames(r)[0]]},k=function(e,t){var n,r=new Function("define","__widget_webpack_public_path__","".concat(e,";\n")),o=function(){for(var e,t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];1===o.length?t=o[0]:2===o.length?(e=o[0],t=o[1]):3===o.length&&(o.shift(),e=o[0],t=o[1]);var i=(e||[]).map((function(e){return"React"===e||"react"===e?u.a:"PropTypes"===e||"prop-types"===e?p.a:"ReactDOM"===e||"react-dom"===e?x.a:null}));n=t.apply(_,i)};return o.amd=!0,r(o,t),n},I=function(e,t){var n,r={},o={};if(new Function("module","require","exports","React","ReactDOM","PropTypes","__widget_webpack_public_path__","".concat(e,";\n"))(r,(function(e){switch(e){case"React":case"react":return u.a;case"PropTypes":case"prop-types":return p.a;case"ReactDOM":case"react-dom":return x.a;default:return null}}),o,u.a,x.a,p.a,t),!(n=r.exports))if(o.default)n=o;else{var a=Object.getOwnPropertyNames(o);a.length>0&&(n=o[a[0]])}return n},P=function(e,t){var n=e.sourceUrl,r=e.frameHeight,o=e.name,a=e.mode,i=t.fiDomainInfo;if("ADMIN"===a)return u.a.createElement(l.Fragment,null);var c=n;return c&&0===c.indexOf("/")&&i&&i.origin&&(c="".concat(i.origin).concat(n)),u.a.createElement("iframe",{width:"100%",height:r,sandbox:"allow-storage-access-by-user-activation allow-scripts allow-forms",src:c,title:o})};P.contextTypes={fiDomainInfo:p.a.object},P.defaultProps={frameHeight:600},P.propTypes={sourceUrl:p.a.string.isRequired,name:p.a.string,mode:p.a.string,frameHeight:p.a.number};var C=P,T=function(e){return Object(l.useEffect)((function(){var t=e.onWidgetInit,n=e.wrapperElement;t&&t({widgetContainer:n.current,props:e})}),[]),u.a.createElement(u.a.Fragment,null)};T.propTypes={wrapperElement:p.a.object,onWidgetInit:p.a.func};var D=T,S="live",F="beta",N=function(e){return e&&(-1!==e.indexOf("application/javascript")||-1!==e.indexOf("text/javascript"))},U=function(e){var t=document.createElement("a");t.href=e;var n=t.search,r=t.hash,o=t.pathname,a=t.origin;a||(a="".concat(t.protocol,"//").concat(t.host,"/"));var i=E.a.parse(n),c=new Date;return i.__cacheBuster="".concat(c.getFullYear(),"-").concat(c.getMonth(),"-").concat(c.getDate()),"".concat(a).concat(o,"?").concat(E.a.stringify(i)).concat(r)},R=function(e,t){var n=e;if(n){if(0===n.indexOf("/*")){var r=n.indexOf("*/");n=n.substring(r+2)}n=n.trim()}var o="";if(t){var a=t.split("/");a.splice(-3),o="".concat(a.join("/"),"/")}var i=function(e){var t=e;return t?0===t.indexOf("var ")?L:0===t.indexOf("define(")?k:0===t.indexOf("module.exports=")||0===t.indexOf("exports.")||0===t.indexOf("exports[")||0===t.indexOf("!function")||(-1!==t.indexOf("function _interopDefault(e)")||-1!==t.indexOf("function _interopDefaultLegacy(e)"))&&-1!==t.indexOf("module.exports=")?I:null:null}(n);if(!i)throw new Error("INVALID_LIBRARY_TARGET");var c=i(n,o);if(!c)throw new Error("INVALID_LIBRARY_TARGET");return c.default?c:{default:c}},A={fetchWidgetComponent:function(e,t,n){return Object(O.a)(h.a.mark((function r(){var o,a,i,c,s;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e||!n){r.next=2;break}return r.abrupt("return",Promise.resolve({default:C}));case 2:if(e){r.next=4;break}return r.abrupt("return",Promise.resolve({default:D}));case 4:return o=e,0===e.indexOf("/")&&t&&t.origin&&(o="".concat(t.origin).concat(e)),a=U(o),r.next=9,fetch(a);case 9:if(i=r.sent,c=i.headers.get("content-type"),N(c)){r.next=13;break}throw new Error("INVALID_CONTENT_TYPE");case 13:return r.next=15,i.text();case 15:if(s=r.sent){r.next=18;break}throw new Error("INVALID_WIDGET_RESPONSE");case 18:return r.abrupt("return",R(s,e));case 19:case"end":return r.stop()}}),r)})))()},getFIDomainInfo:function(e){var t=e;if(t||(t=window.location.href),!t)return{};var n=document.createElement("a");n.href=t;var r=n.pathname,o=n.origin;o||(o="".concat(n.protocol,"//").concat(n.host));var a="";r&&(-1!==r.indexOf("/".concat(S))?a=S:-1!==r.indexOf("/".concat(F))&&(a=F));var i={};return i.origin=o,i.region=a,i}},M="ADMIN",W="TEXT",z="LIST",B=["isAdmin","messages","sourceUrl","isIFrame","containerCls","windowDimensions","extraWidgetProperties","widgetProperties","name","layoutOption","fiDomainInfo","contextCls"],G=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var r;Object(a.a)(this,n),(r=t.call(this,e)).state={};var o=r.props.widgetProperties;return r.wrapperElement=u.a.createRef(),r.state.normalizedProperties=n.getNormalizedProperties(o),r}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isAdmin,n=e.messages,a=e.sourceUrl,i=(e.isIFrame,e.containerCls),c=e.windowDimensions,s=e.extraWidgetProperties,d=e.widgetProperties,f=e.name,p=e.layoutOption,g=e.fiDomainInfo,v=e.contextCls,w=Object(o.a)(e,B),h=this.getWidgetComponent(),O=this.getFallbackComponent(),y=this.state.normalizedProperties,E={};return a?(E.sourceUrl=a,E.layoutOption=p,E.originalWidgetProperties=d,E.fiDomainInfo=g):E=Object(r.a)(Object(r.a)({},w),{},{containerCls:i,wrapperElement:this.wrapperElement}),u.a.createElement(b,{messages:n},u.a.createElement(l.Suspense,{fallback:O},u.a.createElement("div",{className:m()(v,"".concat(i,"__widget-container"),"composite-layout-widget"),ref:this.wrapperElement},u.a.createElement(h,Object.assign({mode:t?M:"",windowDimensions:c,name:f},y,E,s||{})))))}},{key:"getFallbackComponent",value:function(){var e=this.props.fallbackComponent;return e||u.a.createElement(d.a,null)}},{key:"getWidgetComponent",value:function(){if(!this.widgetComponent){var e=this.getWidgetPromise();this.widgetComponent=u.a.lazy((function(){return e}))}return this.widgetComponent}},{key:"getWidgetPromise",value:function(){var e=this.props,t=e.widgetPromise,n=e.isIFrame;if(t)return t;var r=this.props.sourceUrl,o=this.context.fiDomainInfo;return A.fetchWidgetComponent(r,o,n)}},{key:"getWidgetElement",value:function(){return this.wrapperElement?this.wrapperElement.current:void 0}}],[{key:"getDerivedStateFromProps",value:function(e){var t=e.widgetProperties;return{normalizedProperties:n.getNormalizedProperties(t)}}},{key:"getNormalizedProperties",value:function(e){var t,n,o={locale:(null===(t=window.di)||void 0===t||null===(n=t.env)||void 0===n?void 0:n.locale)||"en_US"};return(e||[]).reduce((function(e,t){var n=Object(r.a)({},e),o=t.propertyName,a=t.propertyType,i=t.propertyValue,c=t.propertyValueLocale,s=t.isLocalized,l=i;return a===W&&s?l=Object(r.a)(Object(r.a)({},null!==c&&void 0!==c?c:{}),i&&{en_US:i}):a===z&&(l=(i||"").split(",")),n[o]=l,n}),o)}}]),n}(l.Component);G.contextTypes={fiDomainInfo:p.a.object},G.propTypes={isAdmin:p.a.bool,widgetPromise:p.a.object,messages:p.a.object.isRequired,onWidgetInit:p.a.func,containerCls:p.a.string,contextCls:p.a.string,extraWidgetProperties:p.a.object,windowDimensions:p.a.object,fallbackComponent:p.a.object,layoutOption:p.a.object,fiDomainInfo:p.a.object,sourceUrl:p.a.string,name:p.a.string,isIFrame:p.a.bool,widgetProperties:p.a.array},G.defaultProps={fiDomainInfo:A.getFIDomainInfo()}},1345:function(e,t,n){},1346:function(e,t,n){},1733:function(e,t,n){"use strict";n.r(t);var r=n(175),o=n(0),a=n.n(o),i=n(1302),c=n(1303),s=n(1),l=n.n(s),u=(n(1345),n(1346),n(1777)),d=n(1782),f=n(38),p=n.n(f),g=n(925),m=n(53),v=n(171),b=function(e){var t=Object(o.useState)(void 0),n=Object(r.a)(t,2),a=n[0],i=n[1],c=Object(o.useState)(!0),s=Object(r.a)(c,2),l=s[0],u=s[1],d=Object(o.useState)(void 0),f=Object(r.a)(d,2),b=f[0],w=f[1],h=e||{},O=h.methodName,y=h.params,E=void 0===y?[]:y,j=function(){var e=Object(m.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=(t=v.a[O]).bind.apply(t,[v.a].concat(Object(g.a)(E))),e.next=4,n();case 4:r=e.sent,i(r),u(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),w(e.t0),u(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){j()}),[]),{response:a,isLoading:l,error:b}},w=n(933),h={loadErrorTitle:"Error",loadErrorMessage:"Error loading widget"},O=function(){return a.a.createElement(d.a,{msg:"Please try your request again later. If this issue persists, please contact our support desk.",title:"Something Went Wrong."})},y=function(e){var t,n=e.footerConfig,s=e.legacyFooterConfig,l=e.config,d=e.onLoginSubmit,f=e.navigationData,p=e.onLocaleSelect,g=e.isSubmittingLogin,m=e.isLegacy,y=e.ibguid,E=Object(o.useState)([]),j=Object(r.a)(E,2),x=j[0],_=j[1],L=Object(o.useState)(!1),k=Object(r.a)(L,2),I=k[0],P=k[1],C=l.locale,T=(void 0===C?"en_US":C)||"en_US",D=b({methodName:"getLoginConfig"}),S=D.response,F=D.isLoading,N=D.error,U=null===S||void 0===S?void 0:S.retail,R=null===U||void 0===U||null===(t=U.pages)||void 0===t?void 0:t[0];if(Object(o.useEffect)((function(){if(y){var e=window.location,t=l.timeout,n=l.logout,r=(null!==e&&void 0!==e?e:{}).href,o=t;if(o||(o=null!==n&&void 0!==n?n:""),r&&-1===r.indexOf("ibguid")){var a=-1===r.indexOf("?")?"?":"&",i="".concat(r).concat(a,"reason=").concat(o,"&ibguid=").concat(y);window.history.replaceState(void 0,"",i)}}}),[]),Object(o.useEffect)((function(){_(function(e,t){var n=[],r=(null!==e&&void 0!==e?e:{}).globalNav,o=(null!==r&&void 0!==r?r:{}).menu;return o&&o.forEach((function(e){if(e.locale){var r,o=e.label,a=e.locale;o&&(r=o[t]),n.push({locale:a,displayText:r})}})),n}(f,T))}),[f,T]),Object(o.useEffect)(function(e,t){var n=function(n){var r=document.getElementById("loginApp"),o=e.FiIdForMS,a=e.UserGuidForMS;if("remove"===n&&(o=void 0,a=void 0),window.UserGuidForMS=a,window.FiIdForMS=o,r){var i="remove"===n?"remove":"add";r.classList[i]("login-renderer-wrapper"),window.AbortController||r.classList[i]("login-renderer-unsupported"),t&&r.classList[i]("login-renderer-legacy")}};return function(){return n("add"),function(){n("remove")}}}(l,m),[]),Object(o.useEffect)(function(e,t,n,r){return function(){var o=e,a=(null!==o&&void 0!==o?o:{}).userLockedMessage;if(o.error&&o.userLocked&&t&&a&&-1!==a.indexOf("<a")){n(!0);var i=(null!==t&&void 0!==t?t:{}).links,c=(null!==i&&void 0!==i?i:[]).find((function(e){return"forgottenLoginLinkLabel"===e.propertyName})),s=!!c,l=(null!==c&&void 0!==c?c:{}).link,u=void 0===l?"":l;if(r){var d=window.di,f="".concat((void 0===d?{}:d).env.context,"/app/get-login-config-messages?forgotPasswordLink=").concat(encodeURIComponent(u),"&isForgotPasswordEnabled=").concat(s);fetch(f,{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){var t=e.headers.get("content-type");return 200===e.status&&t&&-1!==t.indexOf("application/json")?e.json():Promise.reject()})).then((function(e){o.userLockedMessage=e.userLockedMessage,n(!1)})).catch((function(e){console.log("error getting messages",e),n(!1)}))}else v.a.getLoginConfigMessages({isForgotPasswordEnabled:s,forgotPasswordLink:r?u:Object(w.a)(u,!0)}).then((function(e){o.userLockedMessage=e.userLockedMessage,n(!1)})).catch((function(e){console.log("error getting messages",e),n(!1)}))}}}(l,R,P,m),[l.error,l.userLocked,R]),F||I)return a.a.createElement(u.a,null);if(N)return O();if(!R)return O();var A=null===U||void 0===U?void 0:U.theme,M=(null!==R&&void 0!==R?R:{}).sourceUrl;return a.a.createElement(a.a.Fragment,null,g&&a.a.createElement("div",{className:"login-renderer-overlay"},a.a.createElement(u.a,null)),a.a.createElement(i.a,{containerCls:"dbk-login-web",messages:h,extraWidgetProperties:{locale:T,legacyLoginConfig:l,supportedLocales:x,loginConfig:R,theme:A,uiConfig:{experienceServiceUIBaseUrl:l.experienceServiceUIBaseUrl,olbUIBaseUrl:"/dbank/live/"},onLocaleSelect:function(e){p&&p(e)},onLinkSelect:function(e){!function(e,t,n){var r=(null!==e&&void 0!==e?e:{}).item,o=null!==r&&void 0!==r?r:{},a=o.propertyName,i=o.link;if(a&&"troubleTestingLinkTestLabel"===a)window.open("".concat(t.staticResourcesContext,"/static/html/login_help.html#compatibility_test"));else if(i){var c="",s=t.unAuthenticatedAllowedUser;"registerLinkLabel"===a&&s&&(c="?ui=new");var l=i;n||(l=Object(w.a)(i,!0)),window.location.href="".concat(l).concat(c||"")}}(e,l,m)},onLoginSubmit:function(e){!function(e,t,n,r){var o="".concat(e.context,"/app/initialLogin"),a=document.createElement("form");a.style.display="none";var i=function(e,t){var n=document.createElement("INPUT");n.name=e,n.value=t,n.type="hidden",a.appendChild(n)};a.method="POST",a.action=o,i("userid",t.username),i("password",t.password),document.body.appendChild(a),n?a.submit():r({target:{form:a}})}(l,e,m,d)}},sourceUrl:M}),m&&a.a.createElement(c.a,{footerConfig:n,legacyFooterConfig:s}))};y.propTypes={footerConfig:l.a.instanceOf(Object),legacyFooterConfig:l.a.instanceOf(Object),config:l.a.instanceOf(Object),navigationData:l.a.instanceOf(Object),isLegacy:l.a.bool,isSubmittingLogin:l.a.bool,onLoginSubmit:l.a.func,onLocaleSelect:l.a.func,ibguid:l.a.string};t.default=y}}]);
//# sourceMappingURL=61.a1899cf8.chunk.js.map